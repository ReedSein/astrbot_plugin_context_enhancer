# 复杂场景下的“前情提要”注入示例

这个文件模拟了当用户触发机器人时，插件在背后拼接并发送给大语言模型（LLM）的完整内容。

---
### 场景模拟

在一个游戏主题的群聊中，最近发生了以下对话：

1.  **玩家A**: "新出的那个赛博朋克风格的游戏《霓虹魅影》有人玩了吗？感觉怎么样？"
2.  **玩家B**: "我玩了！美术风格超赞，但优化有点问题，我3080的显卡有时候都掉帧。"
3.  **机器人**: (之前回答过另一个问题) "你回复了: 明天的天气是晴天。"
4.  **玩家C**: (发了一张游戏截图，截图里是夜晚的城市，霓虹灯闪烁，有中文的广告牌)
5.  **玩家A**: "@玩家D 你不是最喜欢这种风格吗？"
6.  **玩家B**: "对，战斗系统还行，就是剧情有点老套。"
7.  **玩家D**: "我靠，这截图太帅了！我马上去下载！"
8.  **你 (群主)**: "@机器人 总结一下大家对《霓虹魅影》的讨论，并给点建议。"

---
### 插件最终生成的“超级问题”（发送给AI的内容）

```
你正在浏览聊天软件，查看群聊消息。

最近的聊天记录:
玩家A: 新出的那个赛博朋克风格的游戏《霓虹魅影》有人玩了吗？感觉怎么样？
玩家B: 我玩了！美术风格超赞，但优化有点问题，我3080的显卡有时候都掉帧。
玩家C: [图片: 赛博朋克风格的夜晚城市截图，霓虹灯闪烁，有中文广告牌]
玩家A: @玩家D 你不是最喜欢这种风格吗？
玩家B: 对，战斗系统还行，就是剧情有点老套。
玩家D: 我靠，这截图太帅了！我马上去下载！

你最近的回复:
你回复了: 明天的天气是晴天。

现在 群主（ID: 你的QQ号）发了一个消息: 总结一下大家对《霓虹魅影》的讨论，并给点建议。
需要你在心里理清当前到底讨论的什么，搞清楚形势，谁在跟谁说话，你是在插话还是回复，然后根据你的设定和当前形势做出最自然的回复。
```

---
### AI 基于以上信息可能给出的高质量回复

> "好的，根据大家的讨论，我来总结一下《霓虹魅影》这款游戏：
> 
> **优点:**
> *   **美术风格**: 玩家B和玩家D都认为游戏的赛博朋克美术风格非常出色，从玩家C的截图来看，视觉效果确实很吸引人。
> *   **战斗系统**: 玩家B提到战斗系统还可以。
> 
> **缺点:**
> *   **性能优化**: 玩家B反映即使是高端显卡（3080）也可能出现掉帧，说明优化有待加强。
> *   **剧情**: 剧情方面可能比较传统，有点老套。
> 
> **给你的建议:**
> 如果你非常看重游戏的视觉风格和赛博朋克氛围（就像玩家D一样），那这款游戏绝对值得一试。但如果你对性能优化要求很高，或者期待一个非常有新意的剧情，可能需要稍微观望一下后续的更新补丁。建议可以先看看其他玩家的实况视频再做决定。"

---
### 总结

通过这个例子你可以看到：

1.  **信息完整性**: 插件保留了关键的讨论点，比如“美术风格”、“优化问题”、“战斗系统”和“剧情”。
2.  **视觉信息文本化**: 玩家C发的图片被转化为了文字描述 `[图片: ...]`，让AI也能“看懂”图片内容。
3.  **上下文关联**: AI能够准确地将你的问题“总结一下”与前面的聊天记录关联起来，而不是孤立地理解你的问题。
4.  **回复质量提升**: 最终，AI给出的回复不再是空泛的回答，而是基于真实聊天内容、有理有据的详细总结和建议，显得非常智能和人性化。