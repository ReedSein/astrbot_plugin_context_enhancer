# 更新日志

本文档记录了 AstrBot 上下文增强器的所有重要更改。

## [2.0.0] - 2025-01-15

### ✨ 重大架构简化
- 🎯 **简化为SpectreCore风格** - 采用简单直接的上下文构建方式
- 📝 **统一上下文格式** - "你正在浏览聊天软件..." + 最近聊天记录
- 🔄 **移除复杂检测机制** - 删除氛围分析、多层架构等复杂功能
- ⚡ **性能优化** - 更快的处理速度，更低的资源占用

### 🛠️ 核心功能
- 💬 **聊天记录收集** - 收集最近的群聊消息构建上下文
- 🤖 **机器人回复收集** - 记录机器人回复保持对话连贯性
- 📷 **图片智能描述** - 自动为图片生成文字描述（需高级功能）
- 👥 **@信息处理** - 识别和处理@用户的相关信息

### 🔧 技术特性
- 🛡️ **兼容性保证** - 不影响其他插件和系统功能
- 📊 **灵活配置** - 可调节各类消息的收集数量
- 🔍 **调试友好** - 清晰的日志输出便于问题排查
- ⚡ **高级功能支持** - 图片描述、消息格式化等增强功能

### 📝 配置选项
- `enabled_groups` - 启用的群组列表
- `max_normal_messages` - 普通消息收集数量 (默认12)
- `max_triggered_messages` - 触发消息收集数量 (默认8)
- `max_image_messages` - 图片消息收集数量 (默认4)
- `enable_image_caption` - 是否启用图片描述
- `enable_at_processing` - 是否处理@信息
- `collect_bot_replies` - 是否收集机器人回复
- `max_bot_replies` - 机器人回复收集数量 (默认5)

### 📋 移除的功能
- 氛围分析 (`enable_atmosphere_analysis`)
- 安全模式 (`safe_mode`)
- 机器人自称 (`bot_self_reference`)
- 最小消息要求 (`min_normal_messages_for_context`)
- 复杂的层次化上下文结构

### 🎯 设计理念
遵循"简单就是美"的原则，专注于核心的上下文增强功能，提供类似SpectreCore的简洁体验。

---

## 升级说明

从之前版本升级时，配置文件会自动更新为新的简化配置格式。原有的复杂配置选项将被移除，插件将以更简单、更稳定的方式运行。
